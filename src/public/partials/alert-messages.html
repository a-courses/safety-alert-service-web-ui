<div class="card-header text-center">
    <img src="../img/foresee.png" class="float-left"> Alerts
    <i class="fa fa-external-link float-right" aria-hidden="true"></i></div>
<table class="table table-sm">
    <thead>
    <tr>
        <th></th>
        <th>Date</th>
        <th>Time</th>
        <th>status</th>
        <th>User</th>
        <th>Media</th>
        <th>Map</th>
        <th colspan="2" style="text-align:center ;">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="i in ac.alertMessages" ng-if="i.get('notificationType')!=='incident'">
        <td class="icon-cell">
            <img title="{{i.get('incidentType')}}" ng-if="i.get('incidentType')==='Fire'" src="../img/fire.png"
                 class="alert-icons"/>
            <img title="{{i.get('incidentType')}}" ng-if="i.get('incidentType')==='Hazard'" src="../img/hazard.png"
                 class="alert-icons"/>
            <img title="{{i.get('incidentType')}}" ng-if="i.get('incidentType')==='Medical'"
                 src="../img/medical.png"
                 class="alert-icons"/>
            <img title="{{i.get('incidentType')}}" ng-if="i.get('incidentType')==='Accident'"
                 src="../img/accident.png"
                 class="alert-icons"/>
            <img title="{{i.get('incidentType')}}" ng-if="i.get('incidentType')==='Police'" src="../img/police.png"
                 class="alert-icons"/>
        </td>
        <td style="width: 100px;">{{i.get('time') | date:'dd-MMM-yyyy'}}</td>
        <td style="width: 50px;">{{i.get('time') | date:'hh:mma'}}</td>
        <td>{{i.get('status')}}</td>
        <td class="icon-cell">
            <i class="fa fa-user-circle-o blue-icons" aria-hidden="true" title="{{i.get('user.phoneNumber')}}"></i>
        </td>
        <td class="icon-cell">
            <div ng-if="i.get('notificationType') !== 'incident' || i.get('notificationType') !== 'call'">
                <a href="{{i.get('url')}}" target="_blank">
                    <i title="{{i.get('mediaType')}}" ng-if="i.get('mediaType').indexOf('image')!== -1
                    || i.get('mediaType').indexOf('jpeg')!== -1" class="fa fa-picture-o blue-icons"
                       aria-hidden="true"></i>
                </a>
                <a href="{{i.get('url')}}" target="_blank">
                    <i title="{{i.get('mediaType')}}" ng-if="i.get('mediaType')==='video'"
                       class="fa fa-film blue-icons"
                       aria-hidden="true"></i>
                </a>
                <a href="{{i.get('url')}}" target="_blank">
                    <i title="{{i.get('mediaType')}}" ng-if="i.get('mediaType')==='record'"
                       class="fa fa-video-camera blue-icons"
                       aria-hidden="true"></i>
                </a>
                <a href="{{i.get('url')}}" target="_blank">
                    <i title="{{i.get('mediaType')}}" ng-if="i.get('mediaType')==='message'"
                       class="fa fa-comments-o blue-icons"
                       aria-hidden="true"></i>
                </a>
                <a href="{{i.get('url')}}" target="_blank">
                    <i title="{{i.get('mediaType')}}" ng-if="i.get('mediaType')==='phone'"
                       class="fa fa-phone blue-icons" aria-hidden="true"></i>
                </a>
            </div>
        </td>
        <td class="icon-cell" ng-init="">
            <a href="http://maps.google.com/maps?q={{i.get('location.latitude')}},{{i.get('location.longitude')}}"
               target="_blank">
                <i class="fa fa-globe blue-icons" aria-hidden="true"></i></a>
        </td>
        <td style="width: 50px;">
            <span class="badge badge-danger badge-custom-color">
                <i class="fa fa-trash"
                   ng-click="ac.deleteRecordFromList(i.name, i.get('id'), i.get('notificationType'))"></i>
            </span>
        </td>
        <td style="width: 50px;">
            <span class="badge badge-warning badge-custom-color">
                 <i class="fa fa-link" style="color: #ffffff !important;" ng-if="i.get('incidentId')"></i>
                <a href="#" data-tooltip="Settings" style="color: #ffffff !important;" ng-if="!i.get('incidentId')">
                <i class="fa fa-chain-broken"
                   ng-click="ac.saveMappedIncidents(i.name, i.get('incidentId'),i.get('id'),i.get('notificationType'))">
                </i>
            </a>
            </span>
        </td>
    </tr>
    </tbody>
</table>


<!-- The modal Incedent Mapper -->
<div class="modal fade" id="incidentMapping" tabindex="-1" role="dialog" aria-labelledby="modalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border: 0px !important;">
            <div class="modal-header" style="background-color: #49659F;color: #FFFFFF !important;">
                <button type="button" style="background-color: #49659F!important;color: #FFFFFF !important;"
                        class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">x</span>
                </button>
                <h4 class="modal-title" id="incidentMappingTitle">Alert Incident Mapping</h4>
            </div>
            <div class="modal-body">
                Parent Alert : <strong>{{ac.selectIncidentId}}</strong>
                <h5>Incidents</h5>
                <ui-select multiple ng-model="ac.multiple.incidents" theme="select2"
                           style="width:100%; min-width: 300px" close-on-select="false" title="Select Incident">
                    <ui-select-match placeholder="Select colors...">{{$item}}</ui-select-match>
                    <ui-select-choices repeat="color in ac.mappingIncidentIdsWithoutParent | filter:$select.search">
                        {{color}}
                    </ui-select-choices>
                </ui-select>
                <p>Selected Incidents: {{ac.multiple.incidents}}</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                        style="background-color: #49659F!important;border-color: #49659F!important;"
                        ng-click="ac.saveMappedIncidents(ac.selectIncidentId, ac.selectNotificationType)">
                    Save Mapping
                </button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-->